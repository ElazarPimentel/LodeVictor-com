// ===========================
// Language Translations
// ===========================
const translations = {
    es: {
        // Navigation
        nav_home: 'Inicio',
        nav_about: 'Nosotros',
        nav_menu: 'Menú',
        nav_gallery: 'Galería',
        nav_contact: 'Contacto',

        // Hero
        hero_subtitle: 'Riquísima Parrilla (K)',
        hero_description: 'Auténtica parrilla kosher en el corazón de Buenos Aires',
        hero_cta: 'Visitanos',

        // About
        about_title: 'Sobre Nosotros',
        about_text: 'Lo De Victor es una parrilla kosher que ofrece la mejor experiencia gastronómica argentina. Nuestros platos combinan tradición, sabor y la más alta calidad en cada bocado.',
        kosher_title: 'Certificación Kosher',
        kosher_text: 'Rabino Chehebar',
        feature1_title: 'Carnes Premium',
        feature1_text: 'Las mejores cortes de la parrilla argentina',
        feature2_title: '100% Kosher',
        feature2_text: 'Certificación Rabino Chehebar',
        feature3_title: 'Ambiente Familiar',
        feature3_text: 'Cocina casera con amor',

        // Menu
        menu_title: 'Nuestro Menú',
        menu_parrilla: 'Parrilla',
        menu_item1: 'Bife de Chorizo',
        menu_item1_desc: 'Jugoso corte argentino a la parrilla',
        menu_item2: 'Asado de Tira',
        menu_item2_desc: 'Costillas de res al estilo tradicional',
        menu_item3: 'Vacío',
        menu_item3_desc: 'Corte clásico argentino',
        menu_item4: 'Entraña',
        menu_item4_desc: 'Tierno y sabroso',
        menu_pollo: 'Pollo',
        menu_item5: 'Pollo a la Parrilla',
        menu_item5_desc: 'Marinado con hierbas especiales',
        menu_item6: 'Milanesas',
        menu_item6_desc: 'Crujientes y doradas',
        menu_guarniciones: 'Guarniciones',
        menu_item7: 'Papas Fritas',
        menu_item7_desc: 'Caseras y crujientes',
        menu_item8: 'Ensaladas',
        menu_item8_desc: 'Frescas del día',
        menu_note: 'Todos nuestros platos son preparados bajo estricta supervisión Kosher',

        // Gallery
        gallery_title: 'Galería',
        gallery_item1: 'Bife de Chorizo',
        gallery_item2: 'Asado de Tira',
        gallery_item3: 'Entraña',
        gallery_item4: 'Parrilla Mixta',
        gallery_item5: 'Vacío',
        gallery_item6: 'Nuestro Restaurante',

        // Hours
        hours_title: 'Horarios',
        day_monday: 'Lunes',
        day_tuesday: 'Martes',
        day_wednesday: 'Miércoles',
        day_thursday: 'Jueves',
        day_friday: 'Viernes',
        day_saturday: 'Sábado',
        day_sunday: 'Domingo',
        closed: 'Cerrado',
        delivery_title: 'Delivery',
        delivery_text: 'Hacé tu pedido',
        delivery_button: 'Pedí por WhatsApp',
        pickup_title: 'Servicio de Pickup',
        pickup_text: '¡Llevá nuestros deliciosos platos a tu casa!',
        pickup_button: 'Pedí por WhatsApp',
        reservas_title: 'Reservas',
        reservas_text: '¡Reservá tu mesa con anticipación!',
        reservas_button: 'Reservar por WhatsApp',

        // Contact
        contact_title: 'Contacto',
        contact_address: 'Dirección',
        contact_map: 'Ver en Google Maps',
        contact_phone: 'Teléfonos',
        contact_social: 'Redes Sociales',

        // Vacation Banner
        vacation_title: 'Vacaciones:',
        vacation_text: 'Domingo 8/2 atendemos hasta las 15:00hs. Del domingo 8/2 turno noche al jueves 19/2 estaremos cerrados. Reabrimos el viernes 20/2.',

        // Vacation Notice (Hours & Contact)
        vacation_notice_title: 'Vacaciones',
        vacation_notice_hours: 'Dom. 8/2: atendemos hasta las 15:00hs',
        vacation_notice_closed: 'Cerrados del dom. 8/2 noche al jue. 19/2',
        vacation_notice_reopen: 'Reabrimos vie. 20/2',
        vacation_notice_contact: 'Cerrados por vacaciones del 8 al 19/2. Reabrimos vie. 20/2.',

        // Footer
        footer_text: 'Riquísima Parrilla Kosher - Certificación Rabino Chehebar',
        footer_rights: 'Todos los derechos reservados.'
    },
    en: {
        // Navigation
        nav_home: 'Home',
        nav_about: 'About',
        nav_menu: 'Menu',
        nav_gallery: 'Gallery',
        nav_contact: 'Contact',

        // Hero
        hero_subtitle: 'Delicious Kosher Grill (K)',
        hero_description: 'Authentic kosher grill in the heart of Buenos Aires',
        hero_cta: 'Visit Us',

        // About
        about_title: 'About Us',
        about_text: 'Lo De Victor is a kosher grill offering the best Argentine culinary experience with Rabbi Chehebar certification. Our dishes combine tradition, flavor, and the highest quality in every bite.',
        kosher_title: 'Kosher Certification',
        kosher_text: 'Rabbi Chehebar',
        feature1_title: 'Premium Meats',
        feature1_text: 'The finest cuts from the Argentine grill',
        feature2_title: '100% Kosher',
        feature2_text: 'Rabbi Chehebar Certification',
        feature3_title: 'Family Atmosphere',
        feature3_text: 'Home cooking with love',

        // Menu
        menu_title: 'Our Menu',
        menu_parrilla: 'Grill',
        menu_item1: 'Sirloin Steak',
        menu_item1_desc: 'Juicy Argentine grilled cut',
        menu_item2: 'Short Ribs',
        menu_item2_desc: 'Beef ribs in traditional style',
        menu_item3: 'Flank Steak',
        menu_item3_desc: 'Classic Argentine cut',
        menu_item4: 'Skirt Steak',
        menu_item4_desc: 'Tender and flavorful',
        menu_pollo: 'Chicken',
        menu_item5: 'Grilled Chicken',
        menu_item5_desc: 'Marinated with special herbs',
        menu_item6: 'Milanesas',
        menu_item6_desc: 'Crispy and golden',
        menu_guarniciones: 'Sides',
        menu_item7: 'French Fries',
        menu_item7_desc: 'Homemade and crispy',
        menu_item8: 'Salads',
        menu_item8_desc: 'Fresh daily',
        menu_note: 'All our dishes are prepared under strict Kosher supervision',

        // Gallery
        gallery_title: 'Gallery',
        gallery_item1: 'Sirloin Steak',
        gallery_item2: 'Short Ribs',
        gallery_item3: 'Skirt Steak',
        gallery_item4: 'Mixed Grill',
        gallery_item5: 'Flank Steak',
        gallery_item6: 'Our Restaurant',

        // Hours
        hours_title: 'Hours',
        day_monday: 'Monday',
        day_tuesday: 'Tuesday',
        day_wednesday: 'Wednesday',
        day_thursday: 'Thursday',
        day_friday: 'Friday',
        day_saturday: 'Saturday',
        day_sunday: 'Sunday',
        closed: 'Closed',
        delivery_title: 'Delivery',
        delivery_text: 'Place your order',
        delivery_button: 'Order via WhatsApp',
        pickup_title: 'Pickup Service',
        pickup_text: 'Take our delicious dishes home!',
        pickup_button: 'Order via WhatsApp',
        reservas_title: 'Reservations',
        reservas_text: 'Reserve your table in advance!',
        reservas_button: 'Reserve via WhatsApp',

        // Contact
        contact_title: 'Contact',
        contact_address: 'Address',
        contact_map: 'View on Google Maps',
        contact_phone: 'Phones',
        contact_social: 'Social Media',

        // Vacation Banner
        vacation_title: 'Vacation:',
        vacation_text: 'Sunday 2/8 we are open until 3:00 PM. From Sunday 2/8 evening through Thursday 2/19 we will be closed. We reopen Friday 2/20.',

        // Vacation Notice (Hours & Contact)
        vacation_notice_title: 'Vacation',
        vacation_notice_hours: 'Sun. 2/8: open until 3:00 PM',
        vacation_notice_closed: 'Closed from Sun. 2/8 evening through Thu. 2/19',
        vacation_notice_reopen: 'We reopen Fri. 2/20',
        vacation_notice_contact: 'Closed for vacation 2/8 - 2/19. We reopen Fri. 2/20.',

        // Footer
        footer_text: 'Delicious Kosher Grill - Rabbi Chehebar Certification',
        footer_rights: 'All rights reserved.'
    },
    he: {
        // Navigation
        nav_home: 'בית',
        nav_about: 'אודות',
        nav_menu: 'תפריט',
        nav_gallery: 'גלריה',
        nav_contact: 'צור קשר',

        // Hero
        hero_subtitle: 'מעדנייה כשרה מעולה (כ)',
        hero_description: 'מעדנייה כשרה אותנטית בלב בואנוס איירס',
        hero_cta: 'בקרו אותנו',

        // About
        about_title: 'אודותינו',
        about_text: 'לו דה ויקטור היא מעדנייה כשרה המציעה את חוויית האוכל הארגנטינאית הטובה ביותר עם הסמכת הרב צ\'האבר. המנות שלנו משלבות מסורת, טעם ואיכות הגבוהה ביותר בכל ביס.',
        kosher_title: 'הכשר',
        kosher_text: 'הרב צ\'האבר',
        feature1_title: 'בשרים פרימיום',
        feature1_text: 'החתכים הטובים ביותר מהגריל הארגנטינאי',
        feature2_title: '100% כשר',
        feature2_text: 'הכשר הרב צ\'האבר',
        feature3_title: 'אווירה משפחתית',
        feature3_text: 'בישול ביתי עם אהבה',

        // Menu
        menu_title: 'התפריט שלנו',
        menu_parrilla: 'גריל',
        menu_item1: 'סטייק סינטה',
        menu_item1_desc: 'חתך ארגנטינאי עסיסי על הגריל',
        menu_item2: 'צלעות קצרות',
        menu_item2_desc: 'צלעות בקר בסגנון מסורתי',
        menu_item3: 'סטייק פלאנק',
        menu_item3_desc: 'חתך ארגנטינאי קלאסי',
        menu_item4: 'סטייק אנטרנה',
        menu_item4_desc: 'רך וטעים',
        menu_pollo: 'עוף',
        menu_item5: 'עוף על הגריל',
        menu_item5_desc: 'מושרה בעשבי תיבול מיוחדים',
        menu_item6: 'מילנזות',
        menu_item6_desc: 'פריכות וזהובות',
        menu_guarniciones: 'תוספות',
        menu_item7: 'צ\'יפס',
        menu_item7_desc: 'ביתיים ופריכים',
        menu_item8: 'סלטים',
        menu_item8_desc: 'טריים מדי יום',
        menu_note: 'כל המנות שלנו מוכנות תחת השגחה כשרה מחמירה',

        // Gallery
        gallery_title: 'גלריה',
        gallery_item1: 'סטייק סינטה',
        gallery_item2: 'צלעות קצרות',
        gallery_item3: 'סטייק אנטרנה',
        gallery_item4: 'גריל מעורב',
        gallery_item5: 'סטייק פלאנק',
        gallery_item6: 'המסעדה שלנו',

        // Hours
        hours_title: 'שעות פתיחה',
        day_monday: 'שני',
        day_tuesday: 'שלישי',
        day_wednesday: 'רביעי',
        day_thursday: 'חמישי',
        day_friday: 'שישי',
        day_saturday: 'שבת',
        day_sunday: 'ראשון',
        closed: 'סגור',
        delivery_title: 'משלוחים',
        delivery_text: 'בצע את ההזמנה שלך',
        delivery_button: 'הזמן דרך וואטסאפ',
        pickup_title: 'שירות איסוף',
        pickup_text: 'קח את המנות הטעימות שלנו הביתה!',
        pickup_button: 'הזמן דרך וואטסאפ',
        reservas_title: 'הזמנות מקום',
        reservas_text: 'הזמן את השולחן שלך מראש!',
        reservas_button: 'הזמן מקום דרך וואטסאפ',

        // Contact
        contact_title: 'צור קשר',
        contact_address: 'כתובת',
        contact_map: 'צפה במפות גוגל',
        contact_phone: 'טלפונים',
        contact_social: 'רשתות חברתיות',

        // Vacation Banner
        vacation_title: ':חופשה',
        vacation_text: 'ביום ראשון 8/2 אנחנו פתוחים עד 15:00. מיום ראשון 8/2 בערב עד יום חמישי 19/2 נהיה סגורים. נפתח מחדש ביום שישי 20/2.',

        // Vacation Notice (Hours & Contact)
        vacation_notice_title: 'חופשה',
        vacation_notice_hours: 'יום ראשון 8/2: פתוחים עד 15:00',
        vacation_notice_closed: 'סגורים מיום ראשון 8/2 בערב עד יום חמישי 19/2',
        vacation_notice_reopen: 'נפתח מחדש ביום שישי 20/2',
        vacation_notice_contact: 'סגורים לחופשה מ-8/2 עד 19/2. נפתח מחדש ביום שישי 20/2.',

        // Footer
        footer_text: 'מעדנייה כשרה מעולה - הכשר הרב צ\'האבר',
        footer_rights: 'כל הזכויות שמורות.'
    }
};

// ===========================
// Language Switcher
// ===========================
let currentLang = 'es';

function setLanguage(lang) {
    currentLang = lang;

    // Update HTML lang and dir attributes
    document.documentElement.lang = lang;
    if (lang === 'he') {
        document.documentElement.setAttribute('dir', 'rtl');
    } else {
        document.documentElement.setAttribute('dir', 'ltr');
    }

    // Update all translatable elements
    const elements = document.querySelectorAll('[data-translate]');
    elements.forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[lang] && translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });

    // Update active language button
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.getAttribute('data-lang') === lang) {
            btn.classList.add('active');
        }
    });

    // Save preference
    localStorage.setItem('preferredLanguage', lang);
}

// ===========================
// Mobile Menu Toggle
// ===========================
function initMobileMenu() {
    const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
    const navLinks = document.querySelector('.nav-links');

    if (mobileMenuBtn) {
        mobileMenuBtn.addEventListener('click', () => {
            navLinks.classList.toggle('active');
            mobileMenuBtn.classList.toggle('active');
        });

        // Close menu when clicking on a link
        navLinks.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                navLinks.classList.remove('active');
                mobileMenuBtn.classList.remove('active');
            });
        });
    }
}

// ===========================
// Smooth Scroll
// ===========================
function initSmoothScroll() {
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            const href = this.getAttribute('href');
            if (href !== '#' && href.length > 1) {
                e.preventDefault();
                const target = document.querySelector(href);
                if (target) {
                    const navHeight = document.querySelector('.navbar').offsetHeight;
                    const targetPosition = target.offsetTop - navHeight;
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            }
        });
    });
}

// ===========================
// Navbar Background on Scroll
// ===========================
function initNavbarScroll() {
    const navbar = document.querySelector('.navbar');
    let lastScroll = 0;

    window.addEventListener('scroll', () => {
        const currentScroll = window.pageYOffset;

        if (currentScroll > 100) {
            navbar.style.background = 'rgba(0, 0, 0, 0.98)';
            navbar.style.boxShadow = '0 2px 10px rgba(0, 0, 0, 0.5)';
        } else {
            navbar.style.background = 'rgba(0, 0, 0, 0.95)';
            navbar.style.boxShadow = 'none';
        }

        lastScroll = currentScroll;
    });
}

// ===========================
// Gallery Image Placeholders
// ===========================
function createImagePlaceholders() {
    const galleryItems = document.querySelectorAll('.gallery-item img');

    galleryItems.forEach((img, index) => {
        // Set a placeholder background color
        const colors = ['#1a1a1a', '#2a2a2a', '#1f1f1f', '#252525', '#1c1c1c', '#222222'];
        img.style.backgroundColor = colors[index % colors.length];

        // Add loading text
        img.onerror = function() {
            this.style.display = 'none';
            const parent = this.parentElement;
            if (!parent.querySelector('.placeholder-text')) {
                const placeholder = document.createElement('div');
                placeholder.className = 'placeholder-text';
                placeholder.style.cssText = `
                    width: 100%;
                    height: 100%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    background: ${colors[index % colors.length]};
                    color: #666;
                    font-size: 14px;
                `;
                placeholder.textContent = 'Imagen próximamente';
                parent.insertBefore(placeholder, parent.firstChild);
            }
        };
    });
}

// ===========================
// Animation on Scroll
// ===========================
function initScrollAnimations() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -100px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);

    // Observe elements
    const animatedElements = document.querySelectorAll('.feature, .menu-category, .gallery-item, .contact-item, .hours-table, .pickup-info');
    animatedElements.forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(30px)';
        el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(el);
    });
}

// ===========================
// Initialize Everything
// ===========================
document.addEventListener('DOMContentLoaded', () => {
    // Load saved language preference
    const savedLang = localStorage.getItem('preferredLanguage') || 'es';
    setLanguage(savedLang);

    // Initialize language buttons
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const lang = btn.getAttribute('data-lang');
            setLanguage(lang);
        });
    });

    // Initialize other features
    initMobileMenu();
    initSmoothScroll();
    initNavbarScroll();
    createImagePlaceholders();
    initScrollAnimations();

    // Add loading animation
    document.body.style.opacity = '0';
    setTimeout(() => {
        document.body.style.transition = 'opacity 0.5s ease';
        document.body.style.opacity = '1';
    }, 100);
});

// ===========================
// Performance Optimization
// ===========================
// Debounce function for scroll events
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Lazy load images
if ('IntersectionObserver' in window) {
    const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                img.src = img.dataset.src || img.src;
                img.classList.add('loaded');
                observer.unobserve(img);
            }
        });
    });

    document.querySelectorAll('img[data-src]').forEach(img => {
        imageObserver.observe(img);
    });
}
